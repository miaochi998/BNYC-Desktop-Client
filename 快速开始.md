# 🚀 BNYC 桌面客户端 - 快速开始

## ✅ 已完成的工作

恭喜！桌面客户端项目已经成功搭建完成，以下是已完成的所有工作：

### 1. ✅ 环境配置
- Rust 1.90.0 已安装
- Tauri CLI 已安装
- 开发环境已就绪

### 2. ✅ 项目结构
```
desktop-client/
├── src-tauri/              # Tauri后端（Rust）
│   ├── src/main.rs         # ✅ 主程序
│   ├── Cargo.toml          # ✅ 依赖配置
│   ├── tauri.conf.json     # ✅ Tauri配置
│   ├── build.rs            # ✅ 构建脚本
│   └── icons/              # ✅ 应用图标
├── public/                 # 静态资源
│   └── index.html          # ✅ 加载页面
├── .github/workflows/      
│   └── build.yml           # ✅ GitHub Actions自动编译
├── package.json            # ✅ Node配置
├── LICENSE                 # ✅ MIT许可证
└── README.md               # ✅ 完整文档
```

### 3. ✅ 核心功能
- **WebView容器式架构** - 加载远程Web应用
- **开发/生产环境切换** - 自动识别环境
- **应用图标** - 临时图标已生成（macOS）
- **GitHub Actions** - 三平台自动编译已配置

### 4. ✅ 文档完善
- README.md - 完整使用文档
- 快速开始.md - 本文档
- 图标说明文档

---

## 🎯 当前状态

**开发模式正在运行！**

应用正在编译中，首次编译需要下载依赖，可能需要5-10分钟。

### 检查运行状态

```bash
# 查看Tauri进程
ps aux | grep tauri | grep -v grep

# 查看Web端是否运行（应该在6201端口）
curl -I http://localhost:6201
```

---

## 📖 使用指南

### 开发模式

```bash
# 方法1：使用npm（推荐）
cd /Volumes/zhangchi/Development/project/app/BNYC/desktop-client
npm run dev

# 方法2：使用cargo
cd /Volumes/zhangchi/Development/project/app/BNYC/desktop-client
cargo tauri dev
```

**重要提示：** 开发模式会加载 `http://localhost:6201`，请确保Web端在运行！

```bash
# 启动Web端（在另一个终端）
cd /Volumes/zhangchi/Development/project/app/BNYC/saas/customizer-web
npm run dev
```

### 生产构建

```bash
# 构建当前平台
npm run build

# 构建macOS Universal（推荐）
npm run build:macos-universal

# 构建特定平台
npm run build:windows          # Windows x64
npm run build:macos-intel       # macOS Intel
npm run build:macos-silicon     # macOS Apple Silicon
```

### GitHub Actions自动编译

```bash
# 1. 创建版本标签
git tag v1.0.0

# 2. 推送到GitHub
git push origin v1.0.0

# 3. GitHub自动编译3个平台
# 4. 在Actions页面下载安装包
```

---

## 🔧 配置修改

### 修改生产环境URL

编辑 `src-tauri/src/main.rs`：

```rust
// 修改这一行
#[cfg(not(debug_assertions))]
const APP_URL: &str = "https://app.bnyc.com"; // 👈 修改为您的域名
```

### 修改应用信息

编辑 `src-tauri/tauri.conf.json`：

```json
{
  "productName": "BNYC定制系统",  // 应用名称
  "version": "1.0.0",              // 版本号
  "identifier": "com.bnyc.client"  // 应用标识符
}
```

---

## 🎨 替换应用图标

当前使用的是临时图标，建议替换为正式图标：

### 方法1：使用在线工具

1. 访问：https://icon.kitchen/
2. 上传1024x1024的PNG图标
3. 下载生成的所有图标
4. 替换 `src-tauri/icons/` 目录下的文件

### 方法2：使用命令行

```bash
cd src-tauri/icons

# 从source.png生成所有尺寸
# 详见 src-tauri/icons/README.md
```

---

## 📦 构建产物

构建完成后，安装包位于：

```
src-tauri/target/release/bundle/
├── msi/              # Windows安装包
├── dmg/              # macOS安装包
├── deb/              # Linux Debian包
└── appimage/         # Linux AppImage
```

---

## 🐛 故障排除

### 问题1：开发模式启动失败

**检查：** Web端是否在运行

```bash
curl -I http://localhost:6201
```

如果返回200，说明Web端正常。

### 问题2：编译错误

**解决：** 更新依赖

```bash
cd src-tauri
cargo update
```

### 问题3：图标未显示

**解决：** 确保图标文件存在

```bash
ls -la src-tauri/icons/
```

应该看到以下文件：
- 32x32.png
- 128x128.png
- 128x128@2x.png
- icon.icns
- icon.png

---

## 📝 下一步工作

### 必须完成

- [ ] 替换为正式的应用图标
- [ ] 修改生产环境URL（部署后）
- [ ] 测试所有功能

### 可选优化

- [ ] 添加系统托盘功能（需要Tauri API调整）
- [ ] 添加快捷键支持
- [ ] 添加自动更新功能
- [ ] 优化启动性能

---

## 🎉 恭喜！

桌面客户端基础已经搭建完成！

**主要特点：**
- ✅ 一次编译，多平台支持
- ✅ Web端更新，客户端自动更新
- ✅ GitHub Actions自动化编译
- ✅ 完整的文档支持

**下一步：**
1. 等待首次编译完成
2. 测试应用是否正常启动
3. 查看是否能正常加载Web页面（localhost:6201）
4. 准备正式的应用图标

如有任何问题，请查看README.md或提issue！

---

**最后更新：** 2025-01-15  
**项目状态：** 🟢 已就绪，等待首次编译完成


